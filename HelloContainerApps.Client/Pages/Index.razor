@page "/"
@using Orleans
@using HelloContainerApps.Shared
@inject IClusterClient clusterClient

<PageTitle>Index</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.

<p>
    <button class="btn btn-primary" @onclick="CallHelloWorldGrain">Say hello</button>
</p>

<p>
    <h2>Hello message from grain</h2>
    @if (message != null)
    {
    <p>@message</p>
    }
</p>

@code {

    private string? message;

    private async Task CallHelloWorldGrain()
    {
        var grain = clusterClient.GetGrain<IHelloWorldGrain>(Guid.NewGuid());

        message = await grain.Hello("Client");
    }
}
